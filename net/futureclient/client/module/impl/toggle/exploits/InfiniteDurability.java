/*
 * Decompiled with CFR 0.152.
 */
package com.gitlab.nuf.exeter.module.impl.toggle.exploits;

import com.gitlab.nuf.api.event.Listener;
import com.gitlab.nuf.api.stopwatch.Stopwatch;
import com.gitlab.nuf.exeter.events.PacketEvent;
import com.gitlab.nuf.exeter.module.ModuleType;
import com.gitlab.nuf.exeter.module.ToggleableModule;
import com.gitlab.nuf.exeter.properties.NumberProperty;
import net.minecraft.network.play.client.C02PacketUseEntity;

public final class InfiniteDurability
extends ToggleableModule {
    private final NumberProperty<Long> delay = new NumberProperty<Long>(Long.valueOf(100L), 0L, 5000L, "Delay", "d");
    private boolean switchItem = false;
    private final Stopwatch stopwatch = new Stopwatch();

    public InfiniteDurability() {
        super("Infinite Durability", new String[]{"infinitedurability", "id", "durability"}, -3900369, ModuleType.EXPLOITS);
        this.offerProperties(this.delay);
        this.listeners.add(new Listener<PacketEvent>("infinite_durability_packet_listener"){

            @Override
            public void call(PacketEvent event) {
                C02PacketUseEntity c02PacketUseEntity;
                if (event.getPacket() instanceof C02PacketUseEntity && (c02PacketUseEntity = (C02PacketUseEntity)event.getPacket()).getAction() == C02PacketUseEntity.Action.ATTACK) {
                    InfiniteDurability.this.switchItem = !InfiniteDurability.this.switchItem;
                    if (InfiniteDurability.this.stopwatch.hasCompleted((Long)InfiniteDurability.this.delay.getValue())) {
                        ((InfiniteDurability)InfiniteDurability.this).minecraft.thePlayer.inventory.currentItem = InfiniteDurability.this.switchItem ? 1 : 0;
                        InfiniteDurability.this.stopwatch.reset();
                    }
                }
            }
        });
    }
}

