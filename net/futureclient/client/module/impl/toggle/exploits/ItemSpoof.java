/*
 * Decompiled with CFR 0.152.
 */
package com.gitlab.nuf.exeter.module.impl.toggle.exploits;

import com.gitlab.nuf.api.event.Listener;
import com.gitlab.nuf.exeter.events.BlockClickedEvent;
import com.gitlab.nuf.exeter.events.MotionUpdateEvent;
import com.gitlab.nuf.exeter.module.ModuleType;
import com.gitlab.nuf.exeter.module.ToggleableModule;
import net.minecraft.item.ItemStack;
import net.minecraft.network.play.client.C09PacketHeldItemChange;

public final class ItemSpoof
extends ToggleableModule {
    private ItemStack itemStack;
    private int oldSlot;

    public ItemSpoof() {
        super("Item Spoof", new String[]{"itemspoof", "spoof", "is"}, -1003647, ModuleType.EXPLOITS);
        this.listeners.add(new Listener<MotionUpdateEvent>("item_spoof_motion_update_listener"){

            @Override
            public void call(MotionUpdateEvent event) {
                switch (event.getTime()) {
                    case BEFORE: {
                        ItemSpoof.this.minecraft.getNetHandler().addToSendQueue(new C09PacketHeldItemChange(ItemSpoof.this.oldSlot == 1 ? 0 : 1));
                        break;
                    }
                    case AFTER: {
                        ItemSpoof.this.minecraft.getNetHandler().addToSendQueue(new C09PacketHeldItemChange(ItemSpoof.this.oldSlot));
                    }
                }
            }
        });
        this.listeners.add(new Listener<BlockClickedEvent>("item_spoof_block_clicked_listener"){

            @Override
            public void call(BlockClickedEvent event) {
                ItemSpoof.this.oldSlot = ((ItemSpoof)ItemSpoof.this).minecraft.thePlayer.inventory.currentItem;
                ItemSpoof.this.itemStack = ((ItemSpoof)ItemSpoof.this).minecraft.thePlayer.inventory.getCurrentItem();
            }
        });
    }

    @Override
    protected void onEnable() {
        super.onEnable();
        this.itemStack = null;
    }
}

